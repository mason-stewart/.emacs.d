<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Emacs 24 configuration for Mason Stewart</title>
<!-- 2015-06-17 Wed 11:41 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Mason Stewart" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Emacs 24 configuration for Mason Stewart</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">Introduction</a>
<ul>
<li><a href="#sec-1-1">Standards</a></li>
<li><a href="#sec-1-2">Inspirations</a></li>
</ul>
</li>
<li><a href="#sec-2">Personal Info</a></li>
<li><a href="#sec-3">Must-Have Configuration</a></li>
<li><a href="#sec-4">Functions</a></li>
<li><a href="#sec-5">Package Management</a>
<ul>
<li><a href="#sec-5-1">Package Repositories</a></li>
<li><a href="#sec-5-2">Packages to Install</a></li>
<li><a href="#sec-5-3">Installing Packages</a></li>
</ul>
</li>
<li><a href="#sec-6">Package Configuration</a>
<ul>
<li><a href="#sec-6-1">Deft</a></li>
<li><a href="#sec-6-2">Smex</a></li>
<li><a href="#sec-6-3">Ido</a></li>
<li><a href="#sec-6-4">Company</a></li>
<li><a href="#sec-6-5">Ack</a></li>
<li><a href="#sec-6-6">Magit</a></li>
<li><a href="#sec-6-7">Org-mode</a></li>
<li><a href="#sec-6-8">God-mode</a></li>
<li><a href="#sec-6-9">Yas</a></li>
</ul>
</li>
<li><a href="#sec-7">GUI Settings</a>
<ul>
<li><a href="#sec-7-1">Modeline Improvements</a></li>
</ul>
</li>
<li><a href="#sec-8">Files and Directories</a></li>
<li><a href="#sec-9">Shells</a></li>
<li><a href="#sec-10">Text Editing</a>
<ul>
<li><a href="#sec-10-1">Backups</a></li>
<li><a href="#sec-10-2">File Behavior</a></li>
<li><a href="#sec-10-3">Indentation</a></li>
<li><a href="#sec-10-4">Multiple Buffers</a></li>
<li><a href="#sec-10-5">Multiple Cursors</a></li>
<li><a href="#sec-10-6">Zap to Char</a></li>
<li><a href="#sec-10-7">Markdown</a></li>
</ul>
</li>
<li><a href="#sec-11">Programming</a>
<ul>
<li><a href="#sec-11-1">autopair-mode</a></li>
<li><a href="#sec-11-2">C</a></li>
<li><a href="#sec-11-3">C#</a></li>
<li><a href="#sec-11-4">Clojure</a></li>
<li><a href="#sec-11-5">CSS/SCSS</a></li>
<li><a href="#sec-11-6">Emacs Lisp</a></li>
<li><a href="#sec-11-7">Gherkin</a></li>
<li><a href="#sec-11-8">Go</a></li>
<li><a href="#sec-11-9">Hy</a></li>
<li><a href="#sec-11-10">Haskell</a></li>
<li><a href="#sec-11-11">Javascript</a></li>
<li><a href="#sec-11-12">Lisp</a></li>
<li><a href="#sec-11-13">Python</a></li>
<li><a href="#sec-11-14">Purescript</a></li>
<li><a href="#sec-11-15">Ruby</a></li>
<li><a href="#sec-11-16">Racket</a></li>
<li><a href="#sec-11-17">Scheme</a></li>
<li><a href="#sec-11-18">YAML</a></li>
</ul>
</li>
<li><a href="#sec-12">Keybindings</a>
<ul>
<li><a href="#sec-12-1">Super-Special Personal Keybindings</a></li>
<li><a href="#sec-12-2">Windmove</a></li>
</ul>
</li>
<li><a href="#sec-13">Projects</a></li>
<li><a href="#sec-14">Emacs Server</a></li>
<li><a href="#sec-15">OS-Specific Settings</a>
<ul>
<li><a href="#sec-15-1">OS X</a></li>
</ul>
</li>
<li><a href="#sec-16">Local Configuration</a></li>
<li><a href="#sec-17">Website</a></li>
</ul>
</div>
</div>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">Introduction</h2>
<div class="outline-text-2" id="text-1">
</div><div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1">Standards</h3>
<div class="outline-text-3" id="text-1-1">
<p>
Emacs does not have namespaces, so you should come up with some
prefix for your variables and functions to avoid
conflicts. Luckily, <code>/</code> is a valid character in Emacs symbols, so I
emulate Clojure namespaces by using this. I use the prefix <code>cnd</code>
(my initials), so a custom function I write would have a name like
this: <code>cnd/gain-ultimate-power</code>.
</p>
</div>
</div>

<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2">Inspirations</h3>
<div class="outline-text-3" id="text-1-2">
<ul class="org-ul">
<li><a href="https://github.com/avdi/.emacs24.d">https://github.com/avdi/.emacs24.d</a>
</li>
<li><a href="http://technomancy.us/153">http://technomancy.us/153</a>
</li>
<li><a href="http://pavpanchekha.com/blog/emacs.html">http://pavpanchekha.com/blog/emacs.html</a>
</li>
<li><a href="http://senny.github.com/cabbage/">http://senny.github.com/cabbage/</a>
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">Personal Info</h2>
<div class="outline-text-2" id="text-2">
<p>
Emacs will try and guess information about you from your
environment. I prefer to be explicit about it.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq user-full-name <span style="color: #aadddd;">"Mason Stewart"</span>)
(setq user-mail-address <span style="color: #aadddd;">"masondesu@gmail.com"</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3">Must-Have Configuration</h2>
<div class="outline-text-2" id="text-3">
<p>
There are a few settings that any user of Emacs should have. You do
want the power of <code>cl</code>, which brings in a lot of Common Lisp's
methods.  You do want Emacs to reload changed files if you haven't
also changed them in Emacs (<code>global-auto-revert-mode</code>). You want
winner-mode, because you are a winner.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #aaffaa;">require</span> '<span style="color: #ccaaff;">cl</span>)
(global-auto-revert-mode t)
(winner-mode t)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4">Functions</h2>
<div class="outline-text-2" id="text-4">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #aaffaa;">defun</span> <span style="color: #aaccff;">cnd/clean-buffer-safe</span> ()
  <span style="color: #5f5f5f; font-style: italic;">"Cleanup whitespace and make sure we are using UTF-8."</span>
  (<span style="color: #aaffaa;">save-excursion</span>
    (whitespace-cleanup-region (point-min) (point-max))
    (set-buffer-file-coding-system 'utf-8)))

(<span style="color: #aaffaa;">defun</span> <span style="color: #aaccff;">cnd/clean-buffer</span> ()
  <span style="color: #5f5f5f; font-style: italic;">"Re-indent the entire buffer and cleanup whitespace."</span>
  (interactive)
  (<span style="color: #aaffaa;">save-excursion</span>
    (indent-region (point-min) (point-max) nil)
    (cnd/clean-buffer-safe)))

(<span style="color: #aaffaa;">defun</span> <span style="color: #aaccff;">cnd/rename-current-buffer-file</span> ()
  <span style="color: #5f5f5f; font-style: italic;">"Renames current buffer and file it is visiting. From http://whattheemacsd.com/file-defuns.el-01.html."</span>
  (interactive)
  (<span style="color: #aaffaa;">let</span> ((name (buffer-name))
        (filename (buffer-file-name)))
    (<span style="color: #aaffaa;">if</span> (not (and filename (file-exists-p filename)))
        (<span style="color: #ff3333; font-weight: bold;">error</span> <span style="color: #aadddd;">"Buffer '%s' is not visiting a file!"</span> name)
      (<span style="color: #aaffaa;">let</span> ((new-name (read-file-name <span style="color: #aadddd;">"New name: "</span> filename)))
        (<span style="color: #aaffaa;">if</span> (get-buffer new-name)
            (<span style="color: #ff3333; font-weight: bold;">error</span> <span style="color: #aadddd;">"A buffer named '%s' already exists!"</span> new-name)
          (rename-file filename new-name 1)
          (rename-buffer new-name)
          (set-visited-file-name new-name)
          (set-buffer-modified-p nil)
          (message <span style="color: #aadddd;">"File '%s' successfully renamed to '%s'"</span>
                   name (file-name-nondirectory new-name)))))))

(<span style="color: #aaffaa;">defun</span> <span style="color: #aaccff;">cnd/kill-current-buffer-file</span> ()
  <span style="color: #5f5f5f; font-style: italic;">"Removes file connected to current buffer and kills buffer. From http://whattheemacsd.com/file-defuns.el-02.html."</span>
  (interactive)
  (<span style="color: #aaffaa;">let</span> ((filename (buffer-file-name))
        (buffer (current-buffer))
        (name (buffer-name)))
    (<span style="color: #aaffaa;">if</span> (not (and filename (file-exists-p filename)))
        (ido-kill-buffer)
      (<span style="color: #aaffaa;">when</span> (yes-or-no-p <span style="color: #aadddd;">"Are you sure you want to remove this file? "</span>)
        (delete-file filename)
        (kill-buffer buffer)
        (message <span style="color: #aadddd;">"File '%s' successfully removed"</span> filename)))))

(<span style="color: #aaffaa;">defun</span> <span style="color: #aaccff;">cnd/increase-font-size</span> ()
  (interactive)
  (set-face-attribute 'default
                      nil
                      <span style="color: #aaffaa;">:height</span>
                      (ceiling (* 1.10
                                  (face-attribute 'default <span style="color: #aaffaa;">:height</span>)))))

(<span style="color: #aaffaa;">defun</span> <span style="color: #aaccff;">cnd/decrease-font-size</span> ()
  (interactive)
  (set-face-attribute 'default
                      nil
                      <span style="color: #aaffaa;">:height</span>
                      (floor (* 0.9
                                (face-attribute 'default <span style="color: #aaffaa;">:height</span>)))))

(<span style="color: #aaffaa;">defun</span> <span style="color: #aaccff;">cnd/save-buffer-always</span> ()
  <span style="color: #5f5f5f; font-style: italic;">"Save the buffer even if it is not modified."</span>
  (interactive)
  (set-buffer-modified-p t)
  (save-buffer))

(<span style="color: #aaffaa;">defun</span> <span style="color: #aaccff;">cnd/edit-config</span> ()
  (interactive)
  (find-file <span style="color: #aadddd;">"~/.emacs.d/start.org"</span>))

(<span style="color: #aaffaa;">defun</span> <span style="color: #aaccff;">cnd/reload-config</span> ()
  (interactive)
  (load-file <span style="color: #aadddd;">"~/.emacs.d/init.el"</span>))

<span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">All below from http://whattheemacsd.com/</span>

(<span style="color: #aaffaa;">defun</span> <span style="color: #aaccff;">cnd/move-line-down</span> ()
  (interactive)
  (<span style="color: #aaffaa;">let</span> ((col (current-column)))
    (<span style="color: #aaffaa;">save-excursion</span>
      (forward-line)
      (transpose-lines 1))
    (forward-line)
    (move-to-column col)))

(<span style="color: #aaffaa;">defun</span> <span style="color: #aaccff;">cnd/move-line-up</span> ()
  (interactive)
  (<span style="color: #aaffaa;">let</span> ((col (current-column)))
    (<span style="color: #aaffaa;">save-excursion</span>
      (forward-line)
      (transpose-lines -1))
    (move-to-column col)))

(<span style="color: #aaffaa;">defun</span> <span style="color: #aaccff;">cnd/open-line-below</span> ()
  (interactive)
  (end-of-line)
  (newline)
  (indent-for-tab-command))

(<span style="color: #aaffaa;">defun</span> <span style="color: #aaccff;">cnd/open-line-above</span> ()
  (interactive)
  (beginning-of-line)
  (newline)
  (forward-line -1)
  (indent-for-tab-command))

(<span style="color: #aaffaa;">defun</span> <span style="color: #aaccff;">mws/yank-and-indent</span> ()
  <span style="color: #5f5f5f; font-style: italic;">"Yank and then indent the newly formed region according to mode."</span>
  (interactive)
  (yank)
  (call-interactively 'indent-region))


(<span style="color: #aaffaa;">defun</span> <span style="color: #aaccff;">mws/expand-region-to-whole-lines</span> ()
  <span style="color: #5f5f5f; font-style: italic;">"Expand the region to make it encompass whole lines.</span>
<span style="color: #5f5f5f; font-style: italic;">If the region is not active, activate the current line.</span>
<span style="color: #5f5f5f; font-style: italic;">From: http://www.emacswiki.org/emacs/.emacs-ChristianRovner.el"</span>
  (<span style="color: #aaffaa;">if</span> (not mark-active)
      <span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">Create region from current line</span>
      (<span style="color: #aaffaa;">progn</span> 
        (beginning-of-line)
        (set-mark (point))
        (end-of-line))
    <span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">The mark is active, expand region</span>
    (<span style="color: #aaffaa;">let</span> ((beg (region-beginning))
          (end (region-end)))
      (goto-char beg)
      (beginning-of-line)
      (set-mark (point))
      (goto-char end)
      (<span style="color: #aaffaa;">unless</span> (bolp) (end-of-line)))))

(<span style="color: #aaffaa;">defun</span> <span style="color: #aaccff;">mws/forward-indent</span> ()
  <span style="color: #5f5f5f; font-style: italic;">"Move the region (or line if no valid region exists) to the right"</span>
  (interactive)
  (<span style="color: #aaffaa;">let</span> (deactivate-mark)
    (mws/expand-region-to-whole-lines)
    <span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">move the region right</span>
    (increase-left-margin (region-beginning)
                          (region-end)
                          nil)))

(<span style="color: #aaffaa;">defun</span> <span style="color: #aaccff;">mws/backward-indent</span> ()
  <span style="color: #5f5f5f; font-style: italic;">"Move the region (or line if no valid region exists) to the left"</span>
  (interactive)
  (<span style="color: #aaffaa;">let</span> (deactivate-mark)
    (mws/expand-region-to-whole-lines)
    <span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">move the region left</span>
    (decrease-left-margin (region-beginning)
                          (region-end)
                          nil)))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5">Package Management</h2>
<div class="outline-text-2" id="text-5">
</div><div id="outline-container-sec-5-1" class="outline-3">
<h3 id="sec-5-1">Package Repositories</h3>
<div class="outline-text-3" id="text-5-1">
<p>
In addition to the default ELPA package repository, I use
Marmalade, which is community-run and has new packages more
quickly. I also use MELPA, which has up-to-date versions of
packages built straight from their repos. I don't want to get all
my packages from there, since they might be flaky, but if I want a
particular package to use the HEAD version, I can throw it in the
<code>package-archive-enable-alist</code>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(load <span style="color: #aadddd;">"package"</span>)

(package-initialize)

(add-to-list 'package-archives
             '(<span style="color: #aadddd;">"marmalade"</span> . <span style="color: #aadddd;">"http://marmalade-repo.org/packages/"</span>))
(add-to-list 'package-archives
             '(<span style="color: #aadddd;">"melpa"</span> . <span style="color: #aadddd;">"http://melpa.milkbox.net/packages/"</span>) t)

(setq package-archive-enable-alist '((<span style="color: #aadddd;">"melpa"</span> deft magit autopair)))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-5-2" class="outline-3">
<h3 id="sec-5-2">Packages to Install</h3>
<div class="outline-text-3" id="text-5-2">
<p>
There's no way I can list each package I use and why here. The
important thing to note is that I set up a var with a list of the
packages I want to have installed.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #aaffaa;">defvar</span> <span style="color: #aaccff;">cnd/packages</span> '(adoc-mode
                       ag
                       auto-complete
                       autopair
                       cider
                       clojure-mode
                       coffee-mode
                       company
                       cperl-mode
                       deft
                       diminish
                       elisp-slime-nav
                       exec-path-from-shell
                       flymake
                       flymake-cursor
                       flymake-python-pyflakes
                       go-mode
                       god-mode
                       gist
                       git-gutter
                       haml-mode
                       htmlize
                       hy-mode
                       ido-ubiquitous
                       inf-mongo
                       inf-clojure
                       jade-mode
                       jinja2-mode
                       js2-mode
                       jsx-mode
                       mac-key-mode
                       magit
                       markdown-mode
                       marmalade
                       multiple-cursors
                       mustache-mode
                       noctilux-theme
                       org
                       paredit
                       phoenix-dark-mono-theme
                       phoenix-dark-pink-theme
                       pony-mode
                       projectile
                       projectile-speedbar
                       purescript-mode
                       python-mode
                       qsimpleq-theme
                       redo+
                       rainbow-delimiters
                       racket-mode
                       sass-mode
                       scss-mode
                       smex
                       sr-speedbar
                       tagedit
                       yaml-mode
                       yasnippet)
  <span style="color: #5f5f5f; font-style: italic;">"Packages I always want installed."</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-5-3" class="outline-3">
<h3 id="sec-5-3">Installing Packages</h3>
<div class="outline-text-3" id="text-5-3">
<p>
This is the magic incantation to get your packages installed. It
will require a network connection if you don't have all your
packages currently installed, but otherwise, does not make any
connections.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #aaffaa;">defun</span> <span style="color: #aaccff;">cnd/packages-installed-p</span> ()
  (loop for pkg in cnd/packages
        when (not (package-installed-p pkg)) do (return nil)
        finally (return t)))

(<span style="color: #aaffaa;">unless</span> (cnd/packages-installed-p)
  (message <span style="color: #aadddd;">"%s"</span> <span style="color: #aadddd;">"Refreshing package database..."</span>)
  (package-refresh-contents)
  (<span style="color: #aaffaa;">dolist</span> (pkg cnd/packages)
    (<span style="color: #aaffaa;">when</span> (not (package-installed-p pkg))
      (package-install pkg))))
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6">Package Configuration</h2>
<div class="outline-text-2" id="text-6">
</div><div id="outline-container-sec-6-1" class="outline-3">
<h3 id="sec-6-1">Deft</h3>
<div class="outline-text-3" id="text-6-1">
<p>
<a href="http://jblevins.org/projects/deft/">http://jblevins.org/projects/deft/</a>
</p>

<p>
Deft is an Emacs mode for quickly browsing, filtering, and editing
directories of plain text notes, inspired by Notational Velocity. I
like it a lot. I want it to store all my notes in my Dropbox, and I
want it to use org-mode for those notes.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq deft-directory <span style="color: #aadddd;">"~/Notes/"</span>)
(setq deft-use-filename-as-title t)
(setq deft-extension <span style="color: #aadddd;">"org"</span>)
(setq deft-text-mode 'org-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-6-2" class="outline-3">
<h3 id="sec-6-2">Smex</h3>
<div class="outline-text-3" id="text-6-2">
<p>
Smex is a replacement for the default behavior of <code>M-x</code> with better
history and completion.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq smex-save-file (expand-file-name <span style="color: #aadddd;">".smex-items"</span> user-emacs-directory))
(smex-initialize)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-6-3" class="outline-3">
<h3 id="sec-6-3">Ido</h3>
<div class="outline-text-3" id="text-6-3">
<p>
Ido stands for Interactively Do Things, but it might as well stand
for "Do the Right Thing." It makes Emacs have something resembling
a modern interface with fuzzy-finding and autocompletion.
</p>

<p>
<code>ido-ubiquitous</code> does exactly what you think it does: it takes the
power of ido and lets you use it almost everywhere.
</p>

<p>
I like to set the two options <code>ido-enable-flex-matching</code> and
<code>ido-use-virtual-buffers</code>. Flex matching gives me fuzzy-finding,
and using virtual buffers lets me switch to (and re-open) closed
buffers from my buffer search.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(ido-mode t)
(ido-ubiquitous t)
(setq ido-enable-flex-matching t
      ido-use-virtual-buffers t)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-6-4" class="outline-3">
<h3 id="sec-6-4">Company</h3>
<div class="outline-text-3" id="text-6-4">
<p>
Company mode offers autocompletion and a number of enhancements to omnisharp-mode for C#.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'after-init-hook 'global-company-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-6-5" class="outline-3">
<h3 id="sec-6-5">Ack</h3>
<div class="outline-text-3" id="text-6-5">
<p>
<code>ack</code> is an enhanced grep.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq ack-prompt-for-directory t)
(setq ack-executable (executable-find <span style="color: #aadddd;">"ack-grep"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-6-6" class="outline-3">
<h3 id="sec-6-6">Magit</h3>
<div class="outline-text-3" id="text-6-6">
<p>
Instead of having magit run next to another window, I like having it
take up the whole frame, so I can take care of all my git stuff at
once and then it can go away. In order for this to work, I have to go
ahead and require magit first.
</p>

<p>
Source: <a href="http://whattheemacsd.com//setup-magit.el-01.html">http://whattheemacsd.com//setup-magit.el-01.html</a>
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #aaffaa;">require</span> '<span style="color: #ccaaff;">magit</span>)

(<span style="color: #aaffaa;">defadvice</span> <span style="color: #aaccff;">magit-status</span> (around magit-fullscreen activate)
  (window-configuration-to-register <span style="color: #aaffaa;">:magit-fullscreen</span>)
  ad-do-it
  (delete-other-windows))

(<span style="color: #aaffaa;">defun</span> <span style="color: #aaccff;">magit-quit-session</span> ()
  <span style="color: #5f5f5f; font-style: italic;">"Restores the previous window configuration and kills the magit buffer"</span>
  (interactive)
  (kill-buffer)
  (jump-to-register <span style="color: #aaffaa;">:magit-fullscreen</span>))

(define-key magit-status-mode-map (kbd <span style="color: #aadddd;">"q"</span>) 'magit-quit-session)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-6-7" class="outline-3">
<h3 id="sec-6-7">Org-mode</h3>
<div class="outline-text-3" id="text-6-7">
<p>
Org-mode, the most useful thing in the world. This configuration 
file is in org-mode.
</p>

<p>
I want to be able to use <a href="http://ditaa.sourceforge.net/">ditaa</a> and Clojure in my org-mode files.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq org-ditaa-jar-path <span style="color: #aadddd;">"~/.emacs.d/vendor/ditaa0_9.jar"</span>)

(org-babel-do-load-languages
 'org-babel-load-languages
 '((ditaa . t)))

(<span style="color: #aaffaa;">require</span> '<span style="color: #ccaaff;">ob-clojure</span>)

(<span style="color: #aaffaa;">defvar</span> <span style="color: #aaccff;">org-babel-default-header-args:clojure</span> 
  '((<span style="color: #aaffaa;">:exports</span> . <span style="color: #aadddd;">"code"</span>) (<span style="color: #aaffaa;">:results</span> . <span style="color: #aadddd;">"silent"</span>)))

(declare-function nrepl-send-string-sync <span style="color: #aadddd;">"ext:nrepl"</span> (code <span style="color: #aaeecc;">&amp;optional</span> ns))

(<span style="color: #aaffaa;">defun</span> <span style="color: #aaccff;">org-babel-execute:clojure</span> (body params)
  <span style="color: #5f5f5f; font-style: italic;">"Execute a block of Clojure code with Babel."</span>
  (<span style="color: #aaffaa;">require</span> '<span style="color: #ccaaff;">nrepl</span>)
  (<span style="color: #aaffaa;">with-temp-buffer</span>
    (insert (org-babel-expand-body:clojure body params))
    ((<span style="color: #aaffaa;">lambda</span> (result)
       (<span style="color: #aaffaa;">let</span> ((result-params (cdr (assoc <span style="color: #aaffaa;">:result-params</span> params))))
         (<span style="color: #aaffaa;">if</span> (or (member <span style="color: #aadddd;">"scalar"</span> result-params)
                 (member <span style="color: #aadddd;">"verbatim"</span> result-params))
             result
           (<span style="color: #aaffaa;">condition-case</span> nil (org-babel-script-escape result)
             (<span style="color: #ff3333; font-weight: bold;">error</span> result)))))
     (plist-get (nrepl-send-string-sync
                 (buffer-substring-no-properties (point-min) (point-max))
                 (cdr (assoc <span style="color: #aaffaa;">:package</span> params)))
                <span style="color: #aaffaa;">:value</span>))))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-6-8" class="outline-3">
<h3 id="sec-6-8">God-mode</h3>
<div class="outline-text-3" id="text-6-8">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #aadddd;">"&lt;escape&gt;"</span>) 'god-local-mode)
(<span style="color: #aaffaa;">defun</span> <span style="color: #aaccff;">my-update-cursor</span> ()
  (setq cursor-type (<span style="color: #aaffaa;">if</span> (or god-local-mode buffer-read-only)
                        'box
                      'bar)))

(add-hook 'god-mode-enabled-hook 'my-update-cursor)
(add-hook 'god-mode-disabled-hook 'my-update-cursor)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-6-9" class="outline-3">
<h3 id="sec-6-9">Yas</h3>
<div class="outline-text-3" id="text-6-9">
<p>
Snippets for all the langs :D
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(yas-global-mode 1)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7">GUI Settings</h2>
<div class="outline-text-2" id="text-7">
<p>
Emacs' default GUI settings are not great and cause it to not
resemble a modern application. Luckily, they are very
configurable.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq
 <span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">Do not show a splash screen.</span>
 inhibit-splash-screen t
 <span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">Show incomplete commands while typing them.</span>
 echo-keystrokes 0.1
 <span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">Never show dialog boxes.</span>
 use-dialog-box nil
 <span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">Flash the screen on errors.</span>
 visible-bell t)

(setq-default
 <span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">Make the cursor a thin vertical line.</span>
 cursor-type 'bar
 <span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">Show the end of files inside buffers.</span>
 indicate-empty-lines t)

<span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">Show what text is selected.</span>
(transient-mark-mode t)
<span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">And delete selected text if we type over it.</span>
(delete-selection-mode t)

<span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">Always show matching sets of parentheses.</span>
(show-paren-mode t)

<span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">Highlight the current line.</span>
(global-hl-line-mode t)

<span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">Hide the scroll bar, tool bar, and menu bar.</span>
(scroll-bar-mode -1)
(tool-bar-mode -1)
(menu-bar-mode -1)

<span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">Allow us to type "y" or "n" instead of "yes" or "no".</span>
(<span style="color: #aaffaa;">defalias</span> '<span style="color: #aaccff;">yes-or-no-p</span> 'y-or-n-p)

<span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">Show the end of files.</span>
(<span style="color: #aaffaa;">when</span> (not indicate-empty-lines)
  (toggle-indicate-empty-lines))

(<span style="color: #aaffaa;">when</span> window-system
  <span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">Make the window title reflect the current buffer.</span>
  (setq frame-title-format '(buffer-file-name <span style="color: #aadddd;">"%f"</span> (<span style="color: #aadddd;">"%b"</span>)))
  <span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">Load my favorite color theme. By passing t as the second parameter,</span>
  <span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">we are not prompted to set the theme as safe.</span>
  (load-theme 'noctilux t)
  <span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">full screen window on start plz</span>
  (set-frame-size (selected-frame) 202 190)
  (set-frame-position (selected-frame) 2 0))

<span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">fix wonky minibuffer bg colors</span>
(set-face-background 'minibuffer-prompt <span style="color: #aadddd;">"#aadddd"</span>)
(set-face-foreground 'minibuffer-prompt <span style="color: #aadddd;">"dark slate gray"</span>)

<span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">omg git gutter yes plz</span>
(global-git-gutter-mode +1)
</pre>
</div>
</div>

<div id="outline-container-sec-7-1" class="outline-3">
<h3 id="sec-7-1">Modeline Improvements</h3>
<div class="outline-text-3" id="text-7-1">
<p>
I like having the column number in my modeline to help with stack
traces and just as a sanity check.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq column-number-mode t)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-8" class="outline-2">
<h2 id="sec-8">Files and Directories</h2>
<div class="outline-text-2" id="text-8">
<p>
I like to set up a vendor directory for any random elisp files I
pull in. I get the majority of my functionality from packages
distributed through ELPA or Marmalade, but sometimes, you find
something random on EmacsWiki that you may want to pull in. After
adding that directory, you're going to want to throw it in your
load-path. Often, you'll have subdirectories in your vendor
directory. Go ahead and add those to the load-path as well.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #aaffaa;">defvar</span> <span style="color: #aaccff;">cnd/vendor-dir</span> (expand-file-name <span style="color: #aadddd;">"vendor"</span> user-emacs-directory)
  <span style="color: #5f5f5f; font-style: italic;">"Location of any random elisp files I find from other authors."</span>)
(add-to-list 'load-path cnd/vendor-dir)

(<span style="color: #aaffaa;">dolist</span> (project (directory-files cnd/vendor-dir t <span style="color: #aadddd;">"\\w+"</span>))
  (<span style="color: #aaffaa;">when</span> (file-directory-p project)
    (add-to-list 'load-path project)))
</pre>
</div>

<p>
Let's tell Speedbar to actually show hidden folders, and fix the unreadable
background color
</p>

<p>
#+BEING<sub>SRC</sub> emacs-lisp
  (setq speedbar-directory-unshown-regexp "^$")
  (setq speedbar-show-unknown-files t)
  (setq sr-speedbar-auto-refresh t)
  (setq sr-speedbar-skip-other-window-p t)
</p>

<p>
  (set-face-background 'speedbar-highlight-face "#000000")
  (set-face-foreground 'speedbar-highlight-face "#26AFEB")
#+END<sub>SRC</sub>
</p>
</div>
</div>

<div id="outline-container-sec-9" class="outline-2">
<h2 id="sec-9">Shells</h2>
<div class="outline-text-2" id="text-9">
<p>
<code>C-d</code> on an empty line in the shell terminates the current
process. Using the following, hitting <code>C-d</code> again will close the
buffer.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">From http://whattheemacsd.com/setup-shell.el-01.html</span>

(<span style="color: #aaffaa;">defun</span> <span style="color: #aaccff;">comint-delchar-or-eof-or-kill-buffer</span> (arg)
  (interactive <span style="color: #aadddd;">"p"</span>)
  (<span style="color: #aaffaa;">if</span> (null (get-buffer-process (current-buffer)))
      (kill-buffer)
    (comint-delchar-or-maybe-eof arg)))

(add-hook 'shell-mode-hook
          (<span style="color: #aaffaa;">lambda</span> ()
            (define-key shell-mode-map
              (kbd <span style="color: #aadddd;">"C-d"</span>) 'comint-delchar-or-eof-or-kill-buffer)))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-10" class="outline-2">
<h2 id="sec-10">Text Editing</h2>
<div class="outline-text-2" id="text-10">
</div><div id="outline-container-sec-10-1" class="outline-3">
<h3 id="sec-10-1">Backups</h3>
<div class="outline-text-3" id="text-10-1">
<p>
Default Emacs behavior around backups dates from a time of
barbarism and should be avoided. On the other hand, it's saved me
once or twice. Therefore, I allow Emacs to keep backups, but
instead of keeping them in the same directory as the file being
edited, I force them to be kept in a temporary directory.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq backup-directory-alist `((<span style="color: #aadddd;">".*"</span> . ,temporary-file-directory)))
(setq auto-save-file-name-transforms `((<span style="color: #aadddd;">".*"</span> ,temporary-file-directory t)))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-10-2" class="outline-3">
<h3 id="sec-10-2">File Behavior</h3>
<div class="outline-text-3" id="text-10-2">
<p>
All files should end with a final newline.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq require-final-newline t)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-10-3" class="outline-3">
<h3 id="sec-10-3">Indentation</h3>
<div class="outline-text-3" id="text-10-3">
<p>
By default, I want to indent with 2 spaces and no tabs.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq-default indent-tabs-mode nil
              tab-width 2)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-10-4" class="outline-3">
<h3 id="sec-10-4">Multiple Buffers</h3>
<div class="outline-text-3" id="text-10-4">
<p>
I often have multiple buffers open with the same name. Emacs usually
deals with this by appending the buffer number to the buffer
name. This is hard to keep track of. Instead, the uniquify library
uses the parent directory name as a prefix to the file name.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #aaffaa;">require</span> '<span style="color: #ccaaff;">uniquify</span>)
(setq uniquify-buffer-name-style 'forward)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-10-5" class="outline-3">
<h3 id="sec-10-5">Multiple Cursors</h3>
<div class="outline-text-3" id="text-10-5">
<p>
Having multiple cursors is the new magic, and I'm still not used to
it. <a href="http://emacsrocks.com/e13.html">Check out the great video about it at Emacs Rocks.</a>
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #aaffaa;">require</span> '<span style="color: #ccaaff;">multiple-cursors</span>)

(global-set-key (quote [C-return]) 'set-rectangular-region-anchor)
(global-set-key (kbd <span style="color: #aadddd;">"C-S-c C-S-c"</span>) 'mc/edit-lines)
(global-set-key (kbd <span style="color: #aadddd;">"C-&gt;"</span>) 'mc/mark-next-like-this)
(global-set-key (kbd <span style="color: #aadddd;">"C-&lt;"</span>) 'mc/mark-previous-like-this)
(global-set-key (kbd <span style="color: #aadddd;">"C-c C-&gt;"</span>) 'mc/mark-all-like-this)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-10-6" class="outline-3">
<h3 id="sec-10-6">Zap to Char</h3>
<div class="outline-text-3" id="text-10-6">
<p>
Zap to char is very useful, but zapping up to a character is even more
useful. A method to do this is in <code>misc.el</code>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #aaffaa;">require</span> '<span style="color: #ccaaff;">misc</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-10-7" class="outline-3">
<h3 id="sec-10-7">Markdown</h3>
<div class="outline-text-3" id="text-10-7">
<p>
Make sure that all Markdown file extensions trigger <code>markdown-mode</code>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-to-list 'auto-mode-alist '(<span style="color: #aadddd;">"\\.md$"</span> . markdown-mode))
(add-to-list 'auto-mode-alist '(<span style="color: #aadddd;">"\\.mdown$"</span> . markdown-mode))
</pre>
</div>

<p>
Also use <code>visual-line-mode</code> to get decent word-wrap when in
<code>markdown-mode</code>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'markdown-mode-hook (<span style="color: #aaffaa;">lambda</span> () (visual-line-mode t)))
</pre>
</div>

<p>
I use <code>pandoc</code> for converting Markdown, so I want to set that as the
command to use when exporting from <code>markdown-mode</code>. I want to enable
smart quotes. I use <a href="http://kevinburke.bitbucket.org/markdowncss/">markdown.css</a> to beautify the output.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq markdown-command <span style="color: #aadddd;">"pandoc --smart -f markdown -t html"</span>)
(setq markdown-css-path (expand-file-name <span style="color: #aadddd;">"markdown.css"</span> cnd/vendor-dir))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-11" class="outline-2">
<h2 id="sec-11">Programming</h2>
<div class="outline-text-2" id="text-11">
</div><div id="outline-container-sec-11-1" class="outline-3">
<h3 id="sec-11-1">autopair-mode</h3>
<div class="outline-text-3" id="text-11-1">
<p>
<code>autopair-mode</code> automatically adds closing parentheses, brackets,
and the like, which is very useful when writing code. It doesn't
get auto-loaded, so I have to require it explicitly.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #aaffaa;">require</span> '<span style="color: #ccaaff;">autopair</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-11-2" class="outline-3">
<h3 id="sec-11-2">C</h3>
<div class="outline-text-3" id="text-11-2">
<p>
C has its own indentation rules, so I have to set them with a
separate variable.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq c-basic-offset 2)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-11-3" class="outline-3">
<h3 id="sec-11-3">C#</h3>
<div class="outline-text-3" id="text-11-3">
<p>
Use OmniSharp when editing C#.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq omnisharp-server-executable-path <span style="color: #aadddd;">"~/OmniSharpServer/OmniSharp/bin/Debug/OmniSharp.exe"</span>)

(add-hook 'csharp-mode-hook 'omnisharp-mode)
(add-hook 'csharp-mode-hook 'eldoc-mode)

(setq omnisharp-auto-complete-popup-help-delay nil)
(setq omnisharp-auto-complete-want-importable-types t)
(setq omnisharp-imenu-support nil)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-11-4" class="outline-3">
<h3 id="sec-11-4">Clojure</h3>
<div class="outline-text-3" id="text-11-4">
<p>
I want Emacs to open up ClojureScript files with Clojure syntax.
</p>

<p>
I want paredit-mode when I am editing Clojure files as well as
rainbow delimiters.
</p>

<p>
Lastly, <code>cider</code> is the Emacs client for the Clojure REPL, and I
want to configure it to hide its special buffers, use eldoc, and be
easy to switch to.
</p>

<p>
Also, let's not have cider jump to errors.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-to-list 'auto-mode-alist '(<span style="color: #aadddd;">"\\.cljs$"</span> . clojure-mode))

(add-hook 'clojure-mode-hook 'paredit-mode)
(add-hook 'clojure-mode-hook 'rainbow-delimiters-mode)
(add-hook 'clojure-mode-hook 'subword-mode)
(add-hook 'cider-repl-mode-hook 'paredit-mode)
(add-hook 'cider-repl-mode-hook 'rainbow-delimiters-mode)
(add-hook 'cider-repl-mode-hook 'subword-mode)

(add-hook 'cider-mode-hook 'cider-turn-on-eldoc-mode)
(setq nrepl-hide-special-buffers t)
(add-to-list 'same-window-buffer-names <span style="color: #aadddd;">"*nrepl*"</span>)
(setq cider-auto-jump-to-error nil)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-11-5" class="outline-3">
<h3 id="sec-11-5">CSS/SCSS</h3>
<div class="outline-text-3" id="text-11-5">
<p>
CSS has its own indentation rules, so I have to set them with a
separate variable.
</p>

<p>
I do not want SCSS to automatically compile to CSS upon save.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq css-indent-offset 2
      scss-compile-at-save nil)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-11-6" class="outline-3">
<h3 id="sec-11-6">Emacs Lisp</h3>
<div class="outline-text-3" id="text-11-6">
<p>
Give us the power of SLIME when coding in elisp; specifically, allow
us to go to definition with M-. and back again with M-,.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(autoload 'elisp-slime-nav-mode <span style="color: #aadddd;">"elisp-slime-nav"</span>)
(add-hook 'emacs-lisp-mode-hook (<span style="color: #aaffaa;">lambda</span> () (elisp-slime-nav-mode t)))
(eval-after-load 'elisp-slime-nav '(diminish 'elisp-slime-nav-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-11-7" class="outline-3">
<h3 id="sec-11-7">Gherkin</h3>
<div class="outline-text-3" id="text-11-7">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #aaffaa;">require</span> '<span style="color: #ccaaff;">gherkin-mode</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-11-8" class="outline-3">
<h3 id="sec-11-8">Go</h3>
<div class="outline-text-3" id="text-11-8">
<p>
Go is a rad systems language from Google. One thing I like about it
is that it has exquisite tools built for it. In particular, it has
<code>gofmt</code>, which formats the code according to Google's specs. I am
adding a hook to <code>go-mode</code> to turn on <code>autopair-mode</code> and to run
<code>gofmt</code> before saving a file.
</p>

<p>
I am also adding <code>go-autocomplete</code>, which will allow me to complete
on methods from my own code and the Go libraries I am using.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'go-mode-hook
          (<span style="color: #aaffaa;">lambda</span> ()
            (autopair-mode)
            (add-hook 'before-save-hook 'gofmt-before-save nil t)))

(<span style="color: #aaffaa;">require</span> '<span style="color: #ccaaff;">go-autocomplete</span>)
(<span style="color: #aaffaa;">require</span> '<span style="color: #ccaaff;">auto-complete-config</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-11-9" class="outline-3">
<h3 id="sec-11-9">Hy</h3>
<div class="outline-text-3" id="text-11-9">
<p>
Hy is a Lisp implemented on top of Python. It is rad.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'hy-mode-hook 'paredit-mode)
(add-hook 'hy-mode-hook 'rainbow-delimiters-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-11-10" class="outline-3">
<h3 id="sec-11-10">Haskell</h3>
<div class="outline-text-3" id="text-11-10">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'haskell-mode-hook 'haskell-indentation-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-11-11" class="outline-3">
<h3 id="sec-11-11">Javascript</h3>
<div class="outline-text-3" id="text-11-11">
<p>
JS has its own indentation rules, so I have to set them with a
separate variable. Let's also go ahead and use js2-mode (better JS mode) and 
ac-js2-mode (smart autocompletion), as well as set the highest level of syntax highlighting.
</p>

<p>
We'll also turn off company-mode for JS buffers. global-company-mode is awesome, but
ac-js2-mode uses autocomplete-mode instead of company-mode.
</p>

<p>
N.B., ac-js2 <b>isn't</b> installed via MELPA, as the current version had
a bug that I needed to patch. Instead the package lives in ~/.emacs.d/vendor/ac-js2
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq js-indent-level 2)
(add-to-list 'auto-mode-alist '(<span style="color: #aadddd;">"\\.js\\'"</span> . js2-mode))
(setq js2-highlight-level 3)

(add-hook 'js2-mode-hook (<span style="color: #aaffaa;">lambda</span> () (company-mode -1)))

(load <span style="color: #aadddd;">"ac-js2"</span>)
(add-hook 'js2-mode-hook 'ac-js2-mode)
(add-hook 'js2-mode-hook 'paredit-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-11-12" class="outline-3">
<h3 id="sec-11-12">Lisp</h3>
<div class="outline-text-3" id="text-11-12">
<p>
Lisp is the most awesome family of programming languages ever. When
I'm using Lisp, I want ultimate power, so I turn on paredit, which
gives me amazing abilities to move code around inside
S-expressions.
</p>

<p>
This section is a good example of how to extend Emacs with keymaps
and minor-modes.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">lisp.el</span>
<span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">(setq lisp-modes '(lisp-mode</span>
<span style="color: #5f5f5f; font-style: italic;">;;                    </span><span style="color: #5f5f5f; font-style: italic;">emacs-lisp-mode</span>
<span style="color: #5f5f5f; font-style: italic;">;;                    </span><span style="color: #5f5f5f; font-style: italic;">common-lisp-mode</span>
<span style="color: #5f5f5f; font-style: italic;">;;                    </span><span style="color: #5f5f5f; font-style: italic;">scheme-mode</span>
<span style="color: #5f5f5f; font-style: italic;">;;                    </span><span style="color: #5f5f5f; font-style: italic;">clojure-mode))</span>
<span style="color: #5f5f5f; font-style: italic;">;; </span>
<span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">(defvar lisp-power-map (make-keymap))</span>
<span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">(define-minor-mode lisp-power-mode "Fix keybindings; add power."</span>
<span style="color: #5f5f5f; font-style: italic;">;;   </span><span style="color: #5f5f5f; font-style: italic;">:lighter " (power)"</span>
<span style="color: #5f5f5f; font-style: italic;">;;   </span><span style="color: #5f5f5f; font-style: italic;">:keymap lisp-power-map</span>
<span style="color: #5f5f5f; font-style: italic;">;;   </span><span style="color: #5f5f5f; font-style: italic;">(paredit-mode t))</span>
<span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">(diminish 'lisp-power-mode)</span>
<span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">(define-key lisp-power-map [delete] 'paredit-forward-delete)</span>
<span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">(define-key lisp-power-map [backspace] 'paredit-backward-delete)</span>
<span style="color: #5f5f5f; font-style: italic;">;; </span>
<span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">(defun cnd/engage-lisp-power ()</span>
<span style="color: #5f5f5f; font-style: italic;">;;   </span><span style="color: #5f5f5f; font-style: italic;">(lisp-power-mode t))</span>
<span style="color: #5f5f5f; font-style: italic;">;; </span>
<span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">(dolist (mode lisp-modes)</span>
<span style="color: #5f5f5f; font-style: italic;">;;   </span><span style="color: #5f5f5f; font-style: italic;">(add-hook (intern (format "%s-hook" mode))</span>
<span style="color: #5f5f5f; font-style: italic;">;;             </span><span style="color: #5f5f5f; font-style: italic;">#'cnd/engage-lisp-power))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-11-13" class="outline-3">
<h3 id="sec-11-13">Python</h3>
<div class="outline-text-3" id="text-11-13">
<p>
I have customized pychecker to run my own version, which runs
autopep8, pyflakes, and pep8.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq py-pychecker-command <span style="color: #aadddd;">"~/.emacs.d/vendor/pychecker"</span>
      py-pychecker-command-args '(<span style="color: #aadddd;">""</span>)
      python-check-command <span style="color: #aadddd;">"~/.emacs.d/vendor/pychecker"</span>)
</pre>
</div>
</div>

<div id="outline-container-sec-11-13-1" class="outline-4">
<h4 id="sec-11-13-1">Django</h4>
<div class="outline-text-4" id="text-11-13-1">
<p>
I use <code>[[https://github.com/davidmiller/pony-mode][pony-mode]]</code> to enhance Emacs when I'm working with Django. I
have it vendored, since it's not on Marmalade. I have to require it to
get <code>pony-tpl-mode</code> (a minor mode for Django templates) working, which
I should figure out.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">TODO autoload this instead of using require</span>

(<span style="color: #aaffaa;">require</span> '<span style="color: #ccaaff;">pony-mode</span>)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-11-14" class="outline-3">
<h3 id="sec-11-14">Purescript</h3>
<div class="outline-text-3" id="text-11-14">
<p>
<code>inferior-psci-mode</code> offers a few helpful key-bindings for loading
current module/file into the repl.
</p>

<p>
I've also added <code>psci-multi-line</code>, which is janky, but if you <i>need</i>
multi-line blocks pasted or typed into the repl in emacs, it's your
best bet.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'purescript-mode-hook 'inferior-psci-mode)
(add-hook 'purescript-mode-hook 'turn-on-purescript-indent)

(<span style="color: #aaffaa;">defun</span> <span style="color: #aaccff;">psci-multi-line</span> ()
  (interactive)
  (<span style="color: #aaffaa;">let</span> ((previous-args psci/arguments))
    <span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">temporarily set multi-line-mode on with -m.</span>
    <span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">the nil value is the STARTFILE which we don't need</span>
    <span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">C-h f "make-comint-in-buffer" for more details.</span>
    (setq psci/arguments '(nil <span style="color: #aadddd;">"-m"</span>))
    <span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">fire up psci in the context of the current buffer</span>
    (psci)
    <span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">and set the args back to their original value</span>
    (setq psci/arguments previous-args)))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-11-15" class="outline-3">
<h3 id="sec-11-15">Ruby</h3>
<div class="outline-text-3" id="text-11-15">
<p>
There are a lot of different file names and extensions that are associated with Ruby. I've listed all I can think of so that <code>ruby-mode</code> is loaded for each of them.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">Rake files are ruby, too, as are gemspecs, rackup files, etc.</span>
(add-to-list 'auto-mode-alist '(<span style="color: #aadddd;">"\\.rake$"</span> . ruby-mode))
(add-to-list 'auto-mode-alist '(<span style="color: #aadddd;">"\\.gemspec$"</span> . ruby-mode))
(add-to-list 'auto-mode-alist '(<span style="color: #aadddd;">"\\.ru$"</span> . ruby-mode))
(add-to-list 'auto-mode-alist '(<span style="color: #aadddd;">"Rakefile$"</span> . ruby-mode))
(add-to-list 'auto-mode-alist '(<span style="color: #aadddd;">"Gemfile$"</span> . ruby-mode))
(add-to-list 'auto-mode-alist '(<span style="color: #aadddd;">"Capfile$"</span> . ruby-mode))
(add-to-list 'auto-mode-alist '(<span style="color: #aadddd;">"Vagrantfile$"</span> . ruby-mode))
</pre>
</div>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'ruby-mode-hook
          (<span style="color: #aaffaa;">lambda</span> ()
            (autopair-mode)
            (add-hook 'before-save-hook 'whitespace-cleanup nil t)
            (define-key ruby-mode-map <span style="color: #aadddd;">"{"</span> 'self-insert-command)
            (define-key ruby-mode-map <span style="color: #aadddd;">"}"</span> 'self-insert-command)
            (define-key ruby-mode-map (kbd <span style="color: #aadddd;">"RET"</span>) 'newline-and-indent)))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-11-16" class="outline-3">
<h3 id="sec-11-16">Racket</h3>
<div class="outline-text-3" id="text-11-16">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-to-list 'auto-mode-alist '(<span style="color: #aadddd;">"\\.rkt\\'"</span> . racket-mode))
(add-hook 'racket-mode-hook 'paredit-mode)
(add-hook 'racket-mode-hook 'rainbow-delimiters-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-11-17" class="outline-3">
<h3 id="sec-11-17">Scheme</h3>
<div class="outline-text-3" id="text-11-17">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'scheme-mode-hook 'paredit-mode)
(add-hook 'scheme-mode-hook 'rainbow-delimiters-mode)

<span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">From chicken scheme wiki</span>

(<span style="color: #aaffaa;">require</span> '<span style="color: #ccaaff;">cmuscheme</span>)

(setq scheme-program-name <span style="color: #aadddd;">"csi -:c"</span>)

<span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">Indenting module body code at column 0</span>
(<span style="color: #aaffaa;">defun</span> <span style="color: #aaccff;">scheme-module-indent</span> (state indent-point normal-indent) 0)
(put 'module 'scheme-indent-function 'scheme-module-indent)

(put 'and-let* 'scheme-indent-function 1)
(put 'parameterize 'scheme-indent-function 1)
(put 'handle-exceptions 'scheme-indent-function 1)
(put 'when 'scheme-indent-function 1)
(put 'unless 'scheme-indent-function 1)
(put 'match 'scheme-indent-function 1)
(put 'pmatch 'scheme-indent-function 1)

(define-key scheme-mode-map <span style="color: #aadddd;">"\C-c\C-l"</span> 'scheme-load-current-file)
(define-key scheme-mode-map <span style="color: #aadddd;">"\C-c\C-k"</span> 'scheme-compile-current-file)

(<span style="color: #aaffaa;">defun</span> <span style="color: #aaccff;">scheme-load-current-file</span> (<span style="color: #aaeecc;">&amp;optional</span> switch)
  (interactive <span style="color: #aadddd;">"P"</span>)
  (<span style="color: #aaffaa;">let</span> ((file-name (buffer-file-name)))
    (comint-check-source file-name)
    (setq scheme-prev-l/c-dir/file (cons (file-name-directory    file-name)
           (file-name-nondirectory file-name)))
    (comint-send-string (scheme-proc) (concat <span style="color: #aadddd;">"(load \""</span>
                file-name
                <span style="color: #aadddd;">"\"\)\n"</span>))
    (<span style="color: #aaffaa;">if</span> switch
      (switch-to-scheme t)
      (message <span style="color: #aadddd;">"\"%s\" loaded."</span> file-name) ) ) )

(<span style="color: #aaffaa;">defun</span> <span style="color: #aaccff;">scheme-compile-current-file</span> (<span style="color: #aaeecc;">&amp;optional</span> switch)
  (interactive <span style="color: #aadddd;">"P"</span>)
  (<span style="color: #aaffaa;">let</span> ((file-name (buffer-file-name)))
    (comint-check-source file-name)
    (setq scheme-prev-l/c-dir/file (cons (file-name-directory    file-name)
           (file-name-nondirectory file-name)))
    (message <span style="color: #aadddd;">"compiling \"%s\" ..."</span> file-name)
    (comint-send-string (scheme-proc) (concat <span style="color: #aadddd;">"(compile-file \""</span>
                file-name
                <span style="color: #aadddd;">"\"\)\n"</span>))
    (<span style="color: #aaffaa;">if</span> switch
      (switch-to-scheme t)
      (message <span style="color: #aadddd;">"\"%s\" compiled and loaded."</span> file-name))))

<span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">scheme-complete</span>

(autoload 'scheme-smart-complete <span style="color: #aadddd;">"scheme-complete"</span> nil t)
(eval-after-load 'scheme
  '(define-key scheme-mode-map <span style="color: #aadddd;">"\t"</span> 'scheme-complete-or-indent))

(autoload 'scheme-get-current-symbol-info <span style="color: #aadddd;">"scheme-complete"</span> nil t)
(add-hook 'scheme-mode-hook
  (<span style="color: #aaffaa;">lambda</span> ()
    (make-local-variable 'eldoc-documentation-function)
    (setq eldoc-documentation-function 'scheme-get-current-symbol-info)
    (eldoc-mode)))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-11-18" class="outline-3">
<h3 id="sec-11-18">YAML</h3>
<div class="outline-text-3" id="text-11-18">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-to-list 'auto-mode-alist '(<span style="color: #aadddd;">"\\.yml$"</span> . yaml-mode))
(add-to-list 'auto-mode-alist '(<span style="color: #aadddd;">"\\.yaml$"</span> . yaml-mode))
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-12" class="outline-2">
<h2 id="sec-12">Keybindings</h2>
<div class="outline-text-2" id="text-12">
<p>
Keybindings are a really personal matter. My philosophy with Emacs
is this: keep as many keybindings as possible the same as the
out-of-the-box Emacs config, and use <code>C-c</code> for your own special
preferences. It's cool to extend the default functionality (setting
Return to <code>newline-and-indent</code> instead of <code>newline</code>, for example),
but radically altering it is only going to frustrate you when you
have use Emacs without your configuration. Plus, it's nice to anyone
you ever have to pair program with.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #aadddd;">"RET"</span>) 'newline-and-indent)
(global-set-key (kbd <span style="color: #aadddd;">"C-;"</span>) 'comment-or-uncomment-region)
(global-set-key (kbd <span style="color: #aadddd;">"M-/"</span>) 'hippie-expand)
(global-set-key (kbd <span style="color: #aadddd;">"M-x"</span>) 'smex)
(global-set-key (kbd <span style="color: #aadddd;">"M-X"</span>) 'smex-major-mode-commands)
(<span style="color: #aaffaa;">if</span> window-system (global-unset-key (kbd <span style="color: #aadddd;">"C-z"</span>)))

(global-set-key (kbd <span style="color: #aadddd;">"C-+"</span>) 'cnd/increase-font-size)
(global-set-key (kbd <span style="color: #aadddd;">"C-="</span>) 'cnd/increase-font-size)
(global-set-key (kbd <span style="color: #aadddd;">"C--"</span>) 'cnd/decrease-font-size)

<span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">not a keybinding itself, but let's turn on mac-keys-mode by default</span>
(mac-key-mode t)

<span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">automatically match curly brackets in paredit mode</span>
(add-hook 'paredit-mode-hook
           (<span style="color: #aaffaa;">lambda</span> ()
              (<span style="color: #aaffaa;">when</span> (&gt;= paredit-version 21)
                (local-set-key (kbd <span style="color: #aadddd;">"{"</span>) 'paredit-open-curly)
                (local-set-key (kbd <span style="color: #aadddd;">"}"</span>) 'paredit-close-curly))))

<span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">paste with indent</span>
(global-set-key (kbd <span style="color: #aadddd;">"A-V"</span>) 'mws/yank-and-indent)

<span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">indent line or region left and right</span>
(global-set-key (kbd <span style="color: #aadddd;">"A-}"</span>) 'mws/forward-indent)
(global-set-key (kbd <span style="color: #aadddd;">"A-{"</span>) 'mws/backward-indent)

<span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">more comfortable next/previous buffer</span>
(global-set-key (kbd <span style="color: #aadddd;">"A-]"</span>) 'next-buffer)
(global-set-key (kbd <span style="color: #aadddd;">"A-["</span>) 'previous-buffer)

<span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">map all of paredit's keybinding to tagedit</span>
(eval-after-load <span style="color: #aadddd;">"sgml-mode"</span>
  '(<span style="color: #aaffaa;">progn</span>
     (<span style="color: #aaffaa;">require</span> '<span style="color: #ccaaff;">tagedit</span>)
     (tagedit-add-paredit-like-keybindings)
     (add-hook 'html-mode-hook (<span style="color: #aaffaa;">lambda</span> () (tagedit-mode 1)))))


<span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">keybindings for omnisharp-mode</span>
<span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">see https://github.com/OmniSharp/omnisharp-emacs/blob/master/example-config-for-evil-mode.el for examples of other things you could keybind.</span>
(add-hook 'omnisharp-mode-hook
  (<span style="color: #aaffaa;">lambda</span> ()
    (local-set-key (kbd <span style="color: #aadddd;">"C-."</span>) 'omnisharp-auto-complete)))

<span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">org-mode rebuild project</span>
(global-set-key (kbd <span style="color: #aadddd;">"A-r"</span>) 'org-publish-current-project)
</pre>
</div>
</div>

<div id="outline-container-sec-12-1" class="outline-3">
<h3 id="sec-12-1">Super-Special Personal Keybindings</h3>
<div class="outline-text-3" id="text-12-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #aadddd;">"C-c a"</span>) 'mark-whole-buffer)
(global-set-key (kbd <span style="color: #aadddd;">"C-c c"</span>) 'query-replace-regexp)
(global-set-key (kbd <span style="color: #aadddd;">"C-c d"</span>) 'deft)
(global-set-key (kbd <span style="color: #aadddd;">"C-c g"</span>) 'magit-status)
(global-set-key (kbd <span style="color: #aadddd;">"C-c M-k"</span>) 'cnd/kill-current-buffer-file)
(global-set-key (kbd <span style="color: #aadddd;">"C-c n"</span>) 'cnd/clean-buffer)
(global-set-key (kbd <span style="color: #aadddd;">"C-c q"</span>) 'join-line)
(global-set-key (kbd <span style="color: #aadddd;">"C-c r"</span>) 'revert-buffer)
(global-set-key (kbd <span style="color: #aadddd;">"C-c C-r"</span>) 'cnd/rename-current-buffer-file)
(global-set-key (kbd <span style="color: #aadddd;">"C-c s e"</span>) 'cnd/edit-config)
(global-set-key (kbd <span style="color: #aadddd;">"C-c s r"</span>) 'cnd/reload-config)
(global-set-key (kbd <span style="color: #aadddd;">"C-c C-s"</span>) 'cnd/save-buffer-always)
(global-set-key (kbd <span style="color: #aadddd;">"C-c v"</span>) 'eval-buffer)
(global-set-key (kbd <span style="color: #aadddd;">"C-c w"</span>) 'whitespace-mode)
(global-set-key (kbd <span style="color: #aadddd;">"C-c x"</span>) 'execute-extended-command)
(global-set-key (kbd <span style="color: #aadddd;">"C-c z"</span>) 'zap-to-char)
(global-set-key (kbd <span style="color: #aadddd;">"M-Z"</span>) 'zap-to-char)
(global-set-key (kbd <span style="color: #aadddd;">"M-z"</span>) 'zap-up-to-char)
(global-set-key (kbd <span style="color: #aadddd;">"&lt;C-S-down&gt;"</span>) 'cnd/move-line-down)
(global-set-key (kbd <span style="color: #aadddd;">"&lt;C-S-up&gt;"</span>) 'cnd/move-line-up)
(global-set-key (kbd <span style="color: #aadddd;">"&lt;C-return&gt;"</span>) 'cnd/open-line-below)
(global-set-key (kbd <span style="color: #aadddd;">"&lt;C-S-return&gt;"</span>) 'cnd/open-line-above)

(global-set-key (kbd <span style="color: #aadddd;">"M-j"</span>)
          (<span style="color: #aaffaa;">lambda</span> ()
                (interactive)
                (join-line -1)))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-12-2" class="outline-3">
<h3 id="sec-12-2">Windmove</h3>
<div class="outline-text-3" id="text-12-2">
<p>
Windmove is a nice little feature to let you move between open
windows by pressing <code>Shift</code> + the arrow keys. I like to add the
ability to also do this using <code>C-c</code>, as using <code>Shift</code> may not work
on all terminals.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(windmove-default-keybindings 'shift)
(global-set-key (kbd <span style="color: #aadddd;">"C-c &lt;left&gt;"</span>)  'windmove-left)
(global-set-key (kbd <span style="color: #aadddd;">"C-c &lt;right&gt;"</span>) 'windmove-right)
(global-set-key (kbd <span style="color: #aadddd;">"C-c &lt;up&gt;"</span>)    'windmove-up)
(global-set-key (kbd <span style="color: #aadddd;">"C-c &lt;down&gt;"</span>)  'windmove-down)
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-13" class="outline-2">
<h2 id="sec-13">Projects</h2>
<div class="outline-text-2" id="text-13">
<p>
Settings for projectile
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">this refreshes speedbar if we change projectile projects</span>
(<span style="color: #aaffaa;">require</span> '<span style="color: #ccaaff;">projectile-speedbar</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-14" class="outline-2">
<h2 id="sec-14">Emacs Server</h2>
<div class="outline-text-2" id="text-14">
<p>
It is very annoying to find that you cannot close a buffer that has
been opened via <code>emacsclient</code> in the same way you would close any
other buffer. The following code fixes that.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'server-switch-hook
          (<span style="color: #aaffaa;">lambda</span> ()
            (<span style="color: #aaffaa;">when</span> (current-local-map)
              (use-local-map (copy-keymap (current-local-map))))
            (<span style="color: #aaffaa;">when</span> server-buffer-clients
              (local-set-key (kbd <span style="color: #aadddd;">"C-x k"</span>) 'server-edit))))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-15" class="outline-2">
<h2 id="sec-15">OS-Specific Settings</h2>
<div class="outline-text-2" id="text-15">
</div><div id="outline-container-sec-15-1" class="outline-3">
<h3 id="sec-15-1">OS X</h3>
<div class="outline-text-3" id="text-15-1">
<p>
Emacs works pretty great on OS X, but there are a few adjustments I
like. <code>mdfind</code> is a command-line interface to Spotlight which works
great when using the <code>locate</code> function in Emacs. <code>aspell</code> is used
instead of <code>ispell</code>. Lastly, OS X has annoying issues with the
<code>PATH</code> environment variable. If you launch Emacs as an app instead
of on the command-line, it will not have the path you set up in
<code>.profile</code> (or wherever you set up your environment variables.)
Therefore, I set it explicitly.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #aaffaa;">when</span> (eq system-type 'darwin)
  (setq locate-command <span style="color: #aadddd;">"mdfind"</span>)
  (setq ispell-program-name <span style="color: #aadddd;">"aspell"</span>)

  (<span style="color: #aaffaa;">defun</span> <span style="color: #aaccff;">set-exec-path-from-shell-PATH</span> ()
    (<span style="color: #aaffaa;">let</span> ((path-from-shell (shell-command-to-string <span style="color: #aadddd;">"$SHELL -i -c 'echo $PATH'"</span>)))
      (setenv <span style="color: #aadddd;">"PATH"</span> path-from-shell)
      (setq exec-path (split-string path-from-shell path-separator))))

  (<span style="color: #aaffaa;">when</span> window-system (set-exec-path-from-shell-PATH))

  (set-face-attribute 'default nil
                <span style="color: #aaffaa;">:family</span> <span style="color: #aadddd;">"Monaco"</span> <span style="color: #aaffaa;">:height</span> 120 <span style="color: #aaffaa;">:weight</span> 'normal)
  (setq mac-option-key-is-meta t)
  (setq mac-command-key-is-meta t)
  (setq mac-command-modifier 'meta)
  (setq mac-option-modifier 'meta)
  (global-set-key (kbd <span style="color: #aadddd;">"M-+"</span>) 'cnd/increase-font-size)
  (global-set-key (kbd <span style="color: #aadddd;">"M-="</span>) 'cnd/increase-font-size)
  (global-set-key (kbd <span style="color: #aadddd;">"M--"</span>) 'cnd/decrease-font-size))
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-16" class="outline-2">
<h2 id="sec-16">Local Configuration</h2>
<div class="outline-text-2" id="text-16">
<p>
No matter how universal your configuration is, you will find
yourself someday needing to configuration something different for a
specific computer. I keep that code in <code>local.el</code>, which gets loaded
at the end of my main configuration.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #aaffaa;">let</span> ((local-config (expand-file-name <span style="color: #aadddd;">"local.el"</span> user-emacs-directory)))
  (<span style="color: #aaffaa;">when</span> (file-exists-p local-config)
    (load local-config)))
</pre>
</div>
</div>
</div>


<div id="outline-container-sec-17" class="outline-2">
<h2 id="sec-17">Website</h2>
<div class="outline-text-2" id="text-17">
<p>
These are the settings for publishing my cool website
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq org-publish-project-alist
      '((<span style="color: #aadddd;">"orgfiles"</span>
         <span style="color: #aaffaa;">:base-directory</span> <span style="color: #aadddd;">"~/masondesu.com/"</span>
         <span style="color: #aaffaa;">:base-extension</span> <span style="color: #aadddd;">"org"</span>
         <span style="color: #aaffaa;">:publishing-directory</span> <span style="color: #aadddd;">"~/masondesu.com/dist/"</span>
         <span style="color: #aaffaa;">:publishing-function</span> org-html-publish-to-html
         <span style="color: #aaffaa;">:exclude</span> <span style="color: #aadddd;">"TO_BE_EXCLUDED_OMG.org"</span>   <span style="color: #5f5f5f; font-style: italic;">;; </span><span style="color: #5f5f5f; font-style: italic;">regexp</span>
         <span style="color: #aaffaa;">:headline-levels</span> 3
         <span style="color: #aaffaa;">:section-numbers</span> nil
         <span style="color: #aaffaa;">:with-toc</span> t
         <span style="color: #aaffaa;">:html-html5-fancy</span> t
         <span style="color: #aaffaa;">:html-doctype</span> <span style="color: #aadddd;">"html5"</span>
         <span style="color: #aaffaa;">:html-head</span> <span style="color: #aadddd;">"&lt;link rel='stylesheet' href='/css/styles.css' type='text/css'/&gt;"</span>
         <span style="color: #aaffaa;">:html-preamble</span> <span style="color: #aadddd;">"&lt;div class='color'&gt;&lt;/div&gt;</span>
<span style="color: #aadddd;">                               &lt;div class='fullscreen'&gt;&lt;/div&gt;"</span>
         <span style="color: #aaffaa;">:html-head-extra</span> <span style="color: #aadddd;">""</span>
         <span style="color: #aaffaa;">:html-postamble</span> <span style="color: #aadddd;">"&lt;p class='postamble'&gt;Written by %a. Last Updated %T. Made with %c&lt;/p&gt;</span>
<span style="color: #aadddd;">                                &lt;script type='text/javascript' src='/js/cool.js'&gt;&lt;/script&gt;"</span>)

        (<span style="color: #aadddd;">"images"</span>
         <span style="color: #aaffaa;">:base-directory</span> <span style="color: #aadddd;">"~/masondesu.com/images/"</span>
         <span style="color: #aaffaa;">:base-extension</span> <span style="color: #aadddd;">"jpg</span><span style="color: #aaeecc;">\\</span><span style="color: #ff8888;">|</span><span style="color: #aadddd;">gif</span><span style="color: #aaeecc;">\\</span><span style="color: #ff8888;">|</span><span style="color: #aadddd;">png"</span>
         <span style="color: #aaffaa;">:publishing-directory</span> <span style="color: #aadddd;">"~/masondesu.com/dist/images/"</span>
         <span style="color: #aaffaa;">:publishing-function</span> org-publish-attachment)

        (<span style="color: #aadddd;">"fonts"</span>
         <span style="color: #aaffaa;">:base-directory</span> <span style="color: #aadddd;">"~/masondesu.com/fonts/"</span>
         <span style="color: #aaffaa;">:base-extension</span> <span style="color: #aadddd;">"eot</span><span style="color: #aaeecc;">\\</span><span style="color: #ff8888;">|</span><span style="color: #aadddd;">svg</span><span style="color: #aaeecc;">\\</span><span style="color: #ff8888;">|</span><span style="color: #aadddd;">ttf</span><span style="color: #aaeecc;">\\</span><span style="color: #ff8888;">|</span><span style="color: #aadddd;">woff"</span>
         <span style="color: #aaffaa;">:publishing-directory</span> <span style="color: #aadddd;">"~/masondesu.com/dist/fonts/"</span>
         <span style="color: #aaffaa;">:publishing-function</span> org-publish-attachment)

        (<span style="color: #aadddd;">"css"</span>
         <span style="color: #aaffaa;">:base-directory</span> <span style="color: #aadddd;">"~/masondesu.com/css/"</span>
         <span style="color: #aaffaa;">:base-extension</span> <span style="color: #aadddd;">"css"</span>
         <span style="color: #aaffaa;">:publishing-directory</span> <span style="color: #aadddd;">"~/masondesu.com/dist/css/"</span>
         <span style="color: #aaffaa;">:publishing-function</span> org-publish-attachment)

        (<span style="color: #aadddd;">"js"</span>
         <span style="color: #aaffaa;">:base-directory</span> <span style="color: #aadddd;">"~/masondesu.com/js/"</span>
         <span style="color: #aaffaa;">:base-extension</span> <span style="color: #aadddd;">"js"</span>
         <span style="color: #aaffaa;">:publishing-directory</span> <span style="color: #aadddd;">"~/masondesu.com/dist/js/"</span>
         <span style="color: #aaffaa;">:publishing-function</span> org-publish-attachment)

        (<span style="color: #aadddd;">"website"</span> <span style="color: #aaffaa;">:components</span> (<span style="color: #aadddd;">"orgfiles"</span> <span style="color: #aadddd;">"images"</span> <span style="color: #aadddd;">"fonts"</span> <span style="color: #aadddd;">"css"</span> <span style="color: #aadddd;">"js"</span>))))
</pre>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Mason Stewart</p>
<p class="date">Created: 2015-06-17 Wed 11:41</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.4.1 (<a href="http://orgmode.org">Org</a> mode 8.2.10)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
